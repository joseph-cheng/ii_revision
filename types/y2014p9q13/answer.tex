\input{../../template.tex}

\begin{document}
\begin{enumerate}[label=(\alph*)]
  \item
  In the PLC, types are defined as follows:

  $T ::= \alpha | T \rightarrow T' | \forall \alpha. T$

  Expressions are defined as follows:

  $e ::= x | \lambda x. e| e e' | \Lambda \alpha. e | e T$

  Typing environments are a pair of contexts $\Gamma, \Theta$, where $\Gamma$ is a map of expression-variables ($x$) to types, and $\Theta$ is a set of type-variables ($\alpha$).

  We give the typing rules below:

  \begin{align*}
    \textsc{var}&\frac{}{\Theta;\Gamma \vdash x : T}(\Gamma(x) = T)\\
    \textsc{fn}&\frac{\Theta \vdash T type \hspace{15pt} \Theta;\Gamma, x:T \vdash e : T'}{\Theta;\Gamma \vdash \lambda x:T. e : T \rightarrow T'}\\
    \textsc{app}&\frac{\Theta;\Gamma \vdash e : T \rightarrow T' \hspace{15pt} \Theta;\Gamma \vdash e': T}{\Theta;\Gamma \vdash e e' : T'}\\
    \textsc{$\forall$}&\frac{\Theta, \alpha;\Gamma \vdash e : T}{\Theta;\Gamma \vdash \Lambda \alpha.e : \forall \alpha. T}\\
    \textsc{$\forall$ app}&\frac{\Theta;\Gamma \vdash e : \forall \alpha. T \hspace{15pt} \Theta \vdash T' type}{\Theta;\Gamma \vdash e T' : [T' / \alpha] T}\\
  \end{align*}

  Beta-reduction $\rightarrow_\beta$ is a relation between two expressions as follows:

  $(\lambda x. e)e' \rightarrow_\beta [e' / x]e$

  $(\Lambda \alpha. e) A \rightarrow_\beta [A / \alpha]e$

  Or, we can beta-reduce when a subexpression $e_1$ of $e$ beta-reduces to $e_1'$.

  Beta-conversion is an equivalence class between expressions, and is simply the equivalence class generated by $\rightarrow_\beta$.

  Beta-conversion is decidable for typeable expressions for two reasons:

  \begin{itemize}
    \item
      By the Church-Rosser theorem, we know that if $e \rightarrow^* e_1$ and $e \rightarrow^* e_2$, then it also holds that there is some $e'$ such that $e_1 \rightarrow^* e'$ and $e_2 \rightarrow^* e'$, up to $\alpha$ equivalence.
    \item
      For typeable terms, we have no infinite chains of beta-reduction.
  \end{itemize}

  Combining these two, we can decide if two terms are beta-convertible by continuously beta-reducing each of them until we cannot any more, i.e. they are in beta-normal form (which we always can do by point 2), and then by the Church-Rosser theorem we have that these two terms will be equal (up to $\alpha$ equivalence) if they are beta-convertible, which we can easily check.

\item

  We use $\tau = \alpha \rightarrow \beta \rightarrow \gamma$.

  We provide the following typings:

  Let $\Gamma = \{x : \alpha, y : \beta, z : \alpha \rightarrow \beta \rightarrow \gamma\}$ and $\Theta = \{\alpha, \beta, \gamma\}$

  We then get:

  $\Theta;\Gamma \vdash z : \alpha \rightarrow \beta \rightarrow \gamma$

  $\Theta;\Gamma \vdash x : \alpha$

  $\Theta;\Gamma \vdash y : \beta$ (all by the var rule)

  $\Theta;\Gamma \vdash z x : \beta \rightarrow \gamma$ (by the app rule)

  $\Theta;\Gamma \vdash z x y : \gamma$ (by the app rule)

  Then, we keep applying the fn and $\forall$ rules:

  $\Theta;\{x:\alpha, y:\beta\} \vdash \lambda z: \tau (z x y) : \tau \rightarrow \gamma$

  etc...

  Until we get:

  $\{\};\{\} \vdash \Lambda \alpha,\beta(\lambda x:\alpha(\lambda y:\beta(\Lambda \gamma(\lambda z: \tau (z x y))))) : \forall \alpha, \beta (\alpha \rightarrow (\beta \rightarrow \forall \gamma (\tau \rightarrow\gamma)))$

  As required.

  Now we proceed for the other term, with $\Gamma = \{z : \forall \gamma ((\alpha \rightarrow \beta \rightarrow \gamma) \rightarrow\gamma), x : \alpha, y : \beta\}, \Theta = \{\alpha, \beta\}$

  We have:

  $\Theta;\Gamma \vdash z : \forall \gamma ((\alpha \rightarrow \beta \rightarrow \gamma) \rightarrow \gamma)$ (by var)

  $\Theta;\Gamma \vdash x : \alpha$ (by var)

  $\Theta \vdash \alpha type$

  $\Theta;\Gamma \vdash z \alpha : ((\alpha \rightarrow \beta \rightarrow \alpha) \rightarrow \alpha)$ (by $\forall$ app)

  Through some applications of the fn rule:

  $\Theta;\{z : \forall \gamma (\tau \rightarrow \gamma)\} \vdash (\lambda x : \alpha (\lambda y : \beta (x))) : \alpha \rightarrow \beta \rightarrow \alpha$

  $\Theta;\{z : \forall \gamma (\tau \rightarrow \gamma)\} \vdash z \alpha (\lambda x : \alpha (\lambda y : \beta (x))) : \alpha$ (by app)

  Therefore, through some applications of the fn and $\forall$ rules, we get:

  $\{\};\{\} \vdash \Lambda \alpha,\beta (\lambda z : \forall \gamma(\tau \rightarrow \gamma)(z \alpha (\lambda x : \alpha(\lambda y : \beta(x))))) : \forall \alpha, \beta((\forall \gamma (\tau \rightarrow \gamma)) \rightarrow \alpha$, as required.

\item

  We use $e_n = \Lambda \alpha(\lambda f : \alpha \rightarrow \alpha. \lambda x : \alpha. f^n x$, where $n$ is a natural number, and:

  $f^0 x = x$

  $f^{n+1}x = f (f^n x)$

  (These are just Church numerals)

\item

  Suppose such a term $Y$ exists.

  Let $f = \lambda x : \alpha. x$, which is of type $\alpha \rightarrow \alpha$

  Then, we get that $Y \alpha f \rightarrow f (Y \alpha f) \rightarrow Y \alpha f$, so we have an infinite chain of beta-reductions, which contradicts the normalization property of the PLC, stated in (a).














        
\end{enumerate}
\end{document}
